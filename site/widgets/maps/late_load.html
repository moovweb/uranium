<!DOCTYPE html>
<html>
  <head>
    <title>Uranium JS | Late-Load Map</title>
    <script src="../../src/uranium-pretty.js"></script>
    <link rel="stylesheet" type='text/css' href='../../stylesheets/main.css' />
  </head>
  
  <body id="late_load_map_page">
    <a href="http://github.com/moovweb/uranium"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/c641758e06304bc53ae7f633269018169e7e5851/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f77686974655f6666666666662e706e67" alt="Fork me on GitHub"></a>
    <div id="menu">
      <div id="menuwrap">
        <a href="../../index.html" class="toplinks "><div class="menuselect">Main</div></a><!-- menuselect-->
        <a href="../../tutorials.html" class="toplinks "><div class="menuselect">Tutorial</div></a><!-- menuselect-->
        <a href="../../widget_list.html" class="toplinks selected"><div class="menuselect">Widgets</div></a><!-- menuselect-->
        <a href="../../more.html" class="toplinks "><div class="menuselect">Philosophy</div></a><!-- menuselect-->
        <a href="../../download.html" class="toplinks "><div class="menuselect">Download</div></a><!-- menuselect-->
      </div><!-- menuwrap-->
    </div><!-- menu-->
    <div id="textbody">
    <div class="wrapper">
  <h1> Late-Load Map </h1>

  <h2> Description</h2>
  <div class='description'>
    <p>
    Simple map thats that gets initialized when you click a button. This is pretty important for
    mobile applications for two reasons. It reduces the amount of data necessary to load
    the page, increasing speed. It also prevents too many requests being sent to Google,
    which they've threatened to start charging for.
    </p>
    
    <p> Note: If you're testing this locally (off of a file in your
    browser) - then geolocation may not work. Put it in your dropbox
    to play with these features </p>
    
  </div>
  
  <h2> Script </h2>
  
  <p>For this trick, a bit of extra javascript is needed. Just insert the following somewhere on the page:</p>
  <div class="highlight"><pre><code class="js">  <span class="kd">function</span> <span class="nx">setup_map</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="nx">Ur</span><span class="p">.</span><span class="nx">setup</span><span class="p">(</span><span class="s2">&quot;[data-ur-set=&#39;map&#39;]&quot;</span><span class="p">);</span>
    <span class="nx">x$</span><span class="p">(</span><span class="s2">&quot;#map_button&quot;</span><span class="p">).</span><span class="nx">un</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">setup_map</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">x$</span><span class="p">(</span><span class="s2">&quot;#map_button&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">setup_map</span><span class="p">);</span>
  
</code></pre></div>
  <p>Then add a button with the <span class="inline_code">id="map_button"</span>, and set the
     <span class="inline_code">data-ur-state</span> of the map to "disabled".

  <h2>Demonstration</h2>
  <div class='test' name='Simple'>

    <span id='map_button'> Click Me to initialize the map </span>

    <script>
      function setup_map(evt){
        Ur.setup("[data-ur-set='map']");
        x$("#map_button").un('click',setup_map);
      }

      x$("#map_button").on('click',setup_map);
    </script>
    
    <div data-ur-set='map' data-ur-state='disabled'>
      <div data-ur-map-component='user_location'
      data-ur-state='disabled'> Use My Location! </div>

      <div data-ur-map-component='icon'
      data-ur-url='../../../stylesheets/resources/uraniumicon.png'><img
      src='../../../stylesheets/resources/uraniumicon.png'/></div>
      
      <div data-ur-map-component='canvas'></div>

      <div data-ur-map-component='address'>
        333 11th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://slims-sf.com'> Slims </a>
        <span> (415) 255-0333 </span>
      </div>

      <div data-ur-map-component='address'>
        1805 Geary Blvd, San Francisco, California 94115
      </div>
      <div data-ur-map-component='description'>
        <a href='http://thefillmore.com/index'> The Fillmore </a>
        <span> 415.346.6000 </span>
      </div>

      <div data-ur-map-component='address'>
        500 4th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://hotelutah.com'> Hotel Utah </a>
        <span> (415) 546-6300 </span>
      </div>

      <div data-ur-map-component='address'>
        859 O'Farrell Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://gamh.com'> Great American Music Hall</a>
        <span> (415) 885-0750 </span>
      </div>

      <div data-ur-map-component='address'>
        1233 17th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://bottomofthehill.com'> Bottom of the Hill </a>
        <span> (415) 621-4455 </span>
      </div>
      
      </div>
    </div>
</div><!-- wrapper -->
    
    <div class="wrapper">
      <p>
      <a href="/widgets/maps.html">Back to Maps Widget</a>
      </p>
    </div>
    
    </div>
    <div id="bottombody">
      <div class="wrapper" id="bottomwrap">
          <a href="http://site.moovweb.com/"><div id="moovweblogo"></div></a>
          Uranium &copy; 2012 | <a href="https://github.com/moovweb/uranium">GitHub</a> | <a href="mailto:uranium@moovweb.com">Contact</a>
      </div><!-- wrapper-->
    </div><!-- bottombody end-->
  </body>
</html>