---
layout: default 
title: Late-Load Map
name: late_load_map
example_selected: selected
---
<div class="wrapper">
  <h1> Late-Load </h1>

  <h2> Description</h2>
  <div class='description'>
    <p>
    Simple map thats that gets initialized when you click a button. This is pretty important for 
    mobile applications for two reasons. It reduces the amount of data necessary to load
    the page, increasing speed. It also prevents too many requests being sent to Google,
    which they've threatened to start charging for.
    </p>
    
    <p> Note: If you're testing this locally (off of a file in your
    browser) - then geolocation may not work. Put it in your dropbox
    to play with these features </p>
    
  </div>
  
  <h2> Script </h2>
  
  <p>For this trick, a bit of extra javascript is needed. Just insert the following somewhere on the page:</p>
    <p class="code">
      <span id="brown">&lt;script><br/>
        <span id="green">&emsp;&emsp;function setup_map(evt){<br/>
          <span id="brown">&emsp;&emsp;&emsp;&emsp;Ur.setup("[data-ur-set='map']");<br/>
          <span id="brown">&emsp;&emsp;&emsp;&emsp;x$("#map_button").un('click',setup_map);<br/>
        <span id="green">&emsp;&emsp;}<br/>

        <span id="green">&emsp;&emsp;x$("#map_button").on('click',setup_map);   <br/>     
      <span id="brown">&lt;/script>
    </p>
  <p>Then add a button with the <span class="inline_code">id="map_button"</span>, and set the
     <span class="inline_code">data-ur-state</span> of the map to "disabled".

  <h2>Demonstration</h2>
  <div class='test' name='Simple'>

    <span id='map_button'> Click Me to initialize the map </span>

    <script>
      function setup_map(evt){
        Ur.setup("[data-ur-set='map']");
        x$("#map_button").un('click',setup_map);
      }

      x$("#map_button").on('click',setup_map);        
    </script>
    
    <div data-ur-set='map' data-ur-state='disabled'>
      <div data-ur-map-component='user_location'
      data-ur-state='disabled'> Use My Location! </div>        

      <div data-ur-map-component='icon'
      data-ur-url='{{site.url}}stylesheets/resources/uraniumicon.png'><img
      src='{{site.url}}stylesheets/resources/uraniumicon.png'/></div>
      
      <div data-ur-map-component='canvas'></div>

      <div data-ur-map-component='address'>
        333 11th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://slims-sf.com'> Slims </a>
        <span> (415) 255-0333 </span>
      </div>        

      <div data-ur-map-component='address'>
        1805 Geary Blvd, San Francisco, California 94115
      </div>
      <div data-ur-map-component='description'>
        <a href='http://thefillmore.com/index'> The Fillmore </a>
        <span> 415.346.6000 </span>          
      </div>                

      <div data-ur-map-component='address'>
        500 4th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://hotelutah.com'> Hotel Utah </a>
        <span> (415) 546-6300 </span>
      </div>        

      <div data-ur-map-component='address'>
        859 O'Farrell Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://gamh.com'> Great American Music Hall</a>
        <span> (415) 885-0750 </span>
      </div>        

      <div data-ur-map-component='address'>
        1233 17th Street, San Francisco, CA
      </div>
      <div data-ur-map-component='description'>
        <a href='http://bottomofthehill.com'> Bottom of the Hill </a>
        <span> (415) 621-4455 </span>
      </div>        
      
      </div>
    </div>
</div><!-- wrapper -->
<div class="wrapper">
  <p>
  <a href="{{site.url}}maps_examples.html">Back to examples of maps.</a>
  </p>
</div>